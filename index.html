<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoGuessr PRO | Gu√≠a Definitiva de Metadatos</title>
    <link rel="stylesheet" href="estilos.css">
    
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<div id="central-status-message" class="hidden-status">
    <span id="central-status-text"></span>
</div>

    <header>
        <div class="header-content">
            <div class="logo-container">
                <img src="logo.jpg" alt="Logo GeoGuessr PRO" class="site-logo">
                <h1>GeoGuessr PRO</h1>
            </div>
            <nav class="header-nav">
                <a href="#introduccion">Inicio</a>
                <a href="#sol-hemisferio">Gu√≠a</a>
                <a href="extra.html">Extra Info</a>
                <a href="#recursos" onclick="scrollToElement('recursos'); return false;">Recursos</a>
                <a href="#contacto">Contacto</a> 
            </nav>
        </div>
    </header>

    <div class="main-layout">
        
        <aside id="sidebar">
            <nav>
                <h3>B√∫squeda R√°pida</h3>
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="Buscar en la gu√≠a...">
                    <button id="search-button">üîç Buscar</button>
                </div>
                
                <h3>√çndice R√°pido</h3>
                <ul>
                    <li><a href="extra.html">üìö Info Extra</a></li>
                    <li><a href="#sol-hemisferio" onclick="scrollToElement('sol-hemisferio'); return false;">‚òÄÔ∏è Sol y Hemisferios</a></li>
                    <li><a href="#conduccion" onclick="scrollToElement('conduccion'); return false;">üöó Lado de Conducci√≥n</a></li>
                    <li><a href="#coches-camaras" onclick="scrollToElement('coches-camaras'); return false;">üì∑ Coches y C√°maras</a></li>
                    <li><a href="#senales" onclick="scrollToElement('senales'); return false;">üõë Se√±ales Clave</a></li>
                    <li><a href="#idiomas" onclick="scrollToElement('idiomas'); return false;">üí¨ Idiomas Clave</a></li>
                    <li><a href="#estructural" onclick="scrollToElement('estructural'); return false;">üöß Estructurales (Meta Vial)</a></li>
                    <li><a href="#pistas-claves" onclick="scrollToElement('pistas-claves'); return false;">üí° Pistas Clave</a></li>
                    <li><a href="#recursos" onclick="scrollToElement('recursos'); return false;">üìö Recursos √ötiles</a></li>
                    
                </ul>
            </nav>
        </aside>

        <main id="content">

            <section id="introduccion">
                <p class="intro-text">
                    Bienvenido a la Gu√≠a Definitiva de Metadatos de GeoGuessr PRO. Prep√°rate para dominar cada pista, desde las sombras del sol hasta la m√°s sutil se√±al vial. ¬°Con esta informaci√≥n, te convertir√°s en un aut√©ntico Plonker y conquistar√°s cualquier mapa!
                </p>
            </section>

            <section id="sol-hemisferio">
                <h2>‚òÄÔ∏è Sol y Hemisferios</h2>
                <p>El sol es el indicador geogr√°fico m√°s fiable. Observa la direcci√≥n de las sombras al mediod√≠a para determinar si est√°s en el Norte o en el Sur.</p>
                <table>
                    <thead>
                        <tr>
                            <th>Elemento</th>
                            <th>Posici√≥n Clave</th>
                            <th>Diferencia</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="road-meta">Hemisferio Norte</td>
                            <td>Sol al Sur (Mediod√≠a)</td>
                            <td>Las sombras apuntan principalmente hacia el Norte.</td>
                        </tr>
                        <tr>
                        
                            <td class="road-meta">Hemisferio Sur</td>
                            <td>Sol al Norte (Mediod√≠a)</td>
                            <td>Las sombras apuntan principalmente hacia el Sur.</td>
                        </tr>
                        <tr>
                            <td class="road-meta">Zona Ecuatorial</td>
                            <td>Sol casi vertical</td>
                            <td>Sombras muy cortas al mediod√≠a.</td>
                        </tr>
                    </tbody>
                </table>
                <div class="image-gallery">
                    <a href="https://www.plonkit.net/images/resize/1200/80/beginners-guide/whattolook_sundirection.png">
                        <img src="https://www.plonkit.net/images/resize/1200/80/beginners-guide/whattolook_sundirection.png" alt="Direcci√≥n del Sol por Hemisferio" class="zoomable-image">
                    </a>
                    <a href="https://storage.googleapis.com/portaleducativo-net-publica-g3p6/biblioteca/Planeta_geograficos.jpg">
                        <img src="https://storage.googleapis.com/portaleducativo-net-publica-g3p6/biblioteca/Planeta_geograficos.jpg" alt="Planeta con L√≠neas Geogr√°ficas" class="zoomable-image">
                    </a>
                </div>
            </section>
            
            <hr>

            <section id="conduccion">
                <h2>üöó Lado de Conducci√≥n</h2>
                <p>El volante y el lado de la carretera reducen el mundo a la mitad instant√°neamente. Busca el veh√≠culo de Google Street View (si es visible).</p>
                <table>
                    <thead>
                        <tr>
                            <th>Caracter√≠stica</th>
                            <th>Pa√≠s/Regi√≥n (Com√∫n)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Derecha (LHD)</td>
                            <td>Am√©rica (casi toda), Europa (casi toda).</td>
                        </tr>
                        <tr>
                            <td>Izquierda (RHD)</td>
                            <td>Reino Unido, Australia, Jap√≥n, India, Sud√°frica, Nueva Zelanda.</td>
                        </tr>
                    </tbody>
                </table>
                <div class="image-gallery full-width">
                    <a href="https://www.plonkit.net/images/resize/1920/80/beginners-guide/Driving_direction_v7.png">
                        <img src="https://www.plonkit.net/images/resize/1920/80/beginners-guide/Driving_direction_v7.png" alt="Mapa de direcciones de conducci√≥n" class="zoomable-image">
                    </a>
                </div>
            </section>
            
            <hr>

            <section id="coches-camaras">
                <h2>üì∑ Coches y C√°maras (Geometr√≠a y Color)</h2>
                <p>El color y la forma del veh√≠culo (si es visible) y la geometr√≠a de la c√°mara/antena pueden ser el mejor indicador de pa√≠s, especialmente en regiones con poca cobertura.</p>
                <table>
                    <thead>
                        <tr>
                            <th>Tipo de Coche/C√°mara</th>
                            <th>Pa√≠s/Regi√≥n (Com√∫n)</th>
                            <th>Indicio Visual Clave</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="road-meta">Coche Negro</td>
                            <td>Jap√≥n</td>
                            <td>Veh√≠culo de c√°mara de Google negro. Muy distintivo de √°reas japonesas.</td>
                        </tr>
                        <tr>
                            <td class="road-meta">"Gen 4" / Antena Larga</td>
                            <td>Europa del Este, Brasil, India, Tailandia</td>
                            <td>Antena de c√°mara notablemente alta o un m√°stil delgado y largo.</td>
                        </tr>
                        <tr>
                            <td class="road-meta">Coche de Colores Vivos</td>
                            <td>Colombia, Brasil, Nigeria</td>
                            <td>A veces se ven coches de colores brillantes o patrones √∫nicos (ej. amarillo en Colombia).</td>
                        </tr>
                        <tr>
                            <td class="road-meta">Antena Corta y Gruesa</td>
                            <td>Estados Unidos, Europa Occidental (Gen 3)</td>
                            <td>Un veh√≠culo m√°s antiguo con una antena baja y gruesa (menos com√∫n en cobertura moderna).</td>
                        </tr>
                        <tr>
                            <td class="road-meta">Barra de Techo Negra (No Google)</td>
                            <td>Australia</td>
                            <td>En √°reas remotas, puede verse un coche con una barra de techo negra y distintiva (proveedor de terceros).</td>
                        </tr>
                    </tbody>
                </table>
                <div class="image-gallery full-width">
                    <a href="Imgg2.jpg">
                        <img src="Imgg2.jpg" alt="Ejemplos de coches y c√°maras de Google Street View" class="zoomable-image">
                    </a>
                </div>
            </section>

            <hr>

            <section id="senales">
                <h2>üõë Se√±ales de Tr√°fico Clave</h2>
                <p>Las se√±ales var√≠an en idioma, forma y color seg√∫n la convenci√≥n regional (Vienna Convention). ¬°Son indicadores muy precisos!</p>
                <table>
                    <thead>
                        <tr>
                            <th>Se√±al</th>
                            <th>Ubicaci√≥n Clave</th>
                            <th>Descripci√≥n / Indicio</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="signal-key">"STOP"</td>
                            <td>Europa, EE. UU., Canad√° (mayor√≠a)</td>
                            <td>Normativa internacional.</td>
                        </tr>
                        <tr>
                            <td class="signal-key">"PARE"</td>
                            <td>Mayor√≠a de Latinoam√©rica</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td class="signal-key">"ALTO"</td>
                            <td>M√©xico, Guatemala</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td class="signal-key">Sin Borde Exterior</td>
                            <td>Grecia</td>
                            <td>Se√±al de fin de prioridad (circular blanca con franja negra).</td>
                        </tr>
                        <tr>
                            <td class="signal-key">Guion Grande</td>
                            <td>Pa√≠ses Bajos</td>
                            <td>Se√±al de fin de prioridad con guion notablemente grande.</td>
                        </tr>
                        <tr>
                            <td class="signal-key">Texto Rojo</td>
                            <td>Dinamarca</td>
                            <td>Se√±ales de aviso espec√≠ficas: texto rojo/fondo blanco/borde rojo.</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="image-gallery full-width">
                    <a href="https://preview.redd.it/2tx42cty3xs61.png?width=1080&crop=smart&auto=webp&s=2a883c3469c300333f942c84887ac9a447e99d60">
                        <img src="https://preview.redd.it/2tx42cty3xs61.png?width=1080&crop=smart&auto=webp&s=2a883c3469c300333f942c84887ac9a447e99d60" alt="Se√±ales de Tr√°fico Clave GeoGuessr: Stop, Pare, Alto, Prioridad" class="zoomable-image">
                    </a>
                </div>
            </section>

            <hr>
            
            <section id="idiomas">
                <h2>üí¨ Identificaci√≥n R√°pida de Idiomas</h2>
                <p>Reconocer los caracteres especiales, acentos, o la estructura b√°sica de las letras te permite reducir el n√∫mero de pa√≠ses de inmediato.</p>
                
                <div class="image-gallery full-width">
                    <a href="https://i.redd.it/z9wtqs747ws61.png">
                        <img src="https://i.redd.it/z9wtqs747ws61.png" alt="Gu√≠a de Identificaci√≥n R√°pida de Idiomas por caracteres" class="zoomable-image">
                    </a>
                    <a href="https://i.redd.it/sgl09710f7hc1.png">
                        <img src="https://i.redd.it/sgl09710f7hc1.png" alt="Diacr√≠ticos y Letras √önicas en Europa del Este" class="zoomable-image">
                    </a>
                </div>
            </section>
            
            <hr>

            <section id="estructural">
                <h2>üöß Carreteras, Bolardos y Postes (Meta Estructural)</h2>
                <p>Busca metadatos en los m√°rgenes de la carretera, son a menudo √∫nicos por pa√≠s o regi√≥n.</p>
                <table>
                    <thead>
                        <tr>
                            <th>Caracter√≠stica</th>
                            <th>Ubicaci√≥n Clave</th>
                            <th>Detalle Clave</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="road-meta">Postes Kilom√©tricos</td>
                            <td>Eslovenia</td>
                            <td class="road-meta-detail">Incluyen el n√∫mero de carretera en un recuadro amarillo. 
                            <div class="image-in-table">
                                <a href="https://us.123rf.com/450wm/jojoo64/jojoo641512/jojoo64151200321/49239106-esloveno-se%C3%B1al-de-tr%C3%A1fico-carretera-marcador-de-distancia.jpg?ver=6">
                                    <img src="https://us.123rf.com/450wm/jojoo64/jojoo641512/jojoo64151200321/49239106-esloveno-se%C3%B1al-de-tr%C3%A1fico-carretera-marcador-de-distancia.jpg?ver=6" alt="Poste kilom√©trico Eslovenia" class="zoomable-image">
                                </a>
                            </div></td>
                        </tr>
                        <tr>
                            <td class="road-meta">Soporte de Se√±al</td>
                            <td>Colombia</td>
                            <td class="road-meta-detail">Soporte trasero vertical adicional formando una CRUZ (‚Ä†). 
                            </td>
                        </tr>
                        <tr>
                            <td class="road-meta">Soporte de Se√±al</td>
                            <td>Uruguay</td>
                            <td class="road-meta-detail">Dos soportes peque√±os (uno arriba, uno abajo) en la parte trasera. 
                            <div class="image-in-table">
                                <a href="https://practicatest.uy/static/img/uy/senales/senales_peligro.png">
                                    <img src="https://practicatest.uy/static/img/uy/senales/senales_peligro.png" alt="Se√±ales de Peligro Uruguay" class="zoomable-image">
                                </a>
                            </div></td>
                        </tr>
                        <tr>
                            <td class="road-meta">Bolardos</td>
                            <td>Francia, Mexico, Islandia, Italia.</td>
                            <td class="road-meta-detail">A menudo blancos y rojos (general).
                            <div class="image-in-table">
                                <a href="https://www.plonkit.net/images/resize/1920/80/beginners-guide/whattolook_bollard.png">
                                    <img src="https://www.plonkit.net/images/resize/1920/80/beginners-guide/whattolook_bollard.png" alt="Ejemplos de Bolardos" class="zoomable-image">
                                </a>
                            </div></td>
                        </tr>
                        <tr>
                            <td class="road-meta">Numeraci√≥n Azul</td>
                            <td>Alemania, Francia, Italia, etc.</td>
                            <td class="road-meta-detail">Carreteras de alta velocidad (Autopistas / Autov√≠as).
                            <div class="image-in-table">
                                <a href="Imgg.jpg">
                                    <img src="Imgg.jpg" alt="Numeraci√≥n Azul de Carreteras" class="zoomable-image">
                                </a>
                            </div></td>
                        </tr>
                        <tr>
                            <td class="road-meta">Numeraci√≥n Amarillo/Negro</td>
                            <td>Alemania, Austria, etc.</td>
                            <td class="road-meta-detail">Carreteras principales (Federales / Nacionales).
                            <div class="image-in-table">
                                <a href="https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Bundesstra%C3%9Fe_299_number.svg/640px-Bundesstra%C3%9Fe_299_number.svg.png">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Bundesstra%C3%9Fe_299_number.svg/640px-Bundesstra%C3%9Fe_299_number.svg.png" alt="Numeraci√≥n Amarillo/Negro" class="zoomable-image">
                                </a>
                            </div></td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <hr>

            <section id="pistas-claves">
                <h2>üí° Pistas Clave Miscel√°neas</h2>
                <p>Algunos metadatos son m√°s sutiles y pueden ayudarte a acotar el pa√≠s cuando fallan los indicadores principales. Estos incluyen detalles de la matr√≠cula, postes y elementos de mobiliario urbano. Observa esta imagen para identificar los elementos m√°s comunes:</p>
                <div class="image-gallery full-width">
                    <a href="https://www.plonkit.net/images/resize/1920/80/beginners-guide/beginners_randommetas1.png">
                        <img src="https://www.plonkit.net/images/resize/1920/80/beginners-guide/beginners_randommetas1.png" alt="Pistas Clave de GeoGuessr (Misc√©lanea)" class="zoomable-image">
                    </a>
                </div>
            </section>
            
            <hr>
            
            <section id="recursos">
                <h2>üìö Recursos √ötiles</h2>
                <p>Aqu√≠ tienes enlaces externos que pueden ayudarte a profundizar tus conocimientos y practicar tus habilidades en GeoGuessr:</p>
                
                <ul class="resource-list">
                    <li><a href="https://geoguessr.com/" target="_blank">GeoGuessr Oficial</a> - El juego principal para practicar.</li>
                    <li><a href="https://geohub.fr/" target="_blank">GeoHub</a> - Una excelente colecci√≥n de mapas espec√≠ficos y herramientas de entrenamiento.</li>
                    <li><a href="https://www.google.com/maps/streetview/" target="_blank">Google Street View</a> - Explora pa√≠ses que no conoces para familiarizarte con el entorno.</li>
                    <li><a href="https://plonkit.net/advanced-guide" target="_blank">Gu√≠a Avanzada (Plonk It)</a> - Para informaci√≥n m√°s detallada sobre metadatos espec√≠ficos.</li>
                </ul>
            </section>
            
            <hr>

            <section id="contacto">
                <h2>‚úâÔ∏è Contacto y Sugerencias</h2>
                <p>¬øTienes sugerencias para mejorar la gu√≠a o quieres compartir un truco de GeoGuessr? ¬°Env√≠anos tu mensaje, puedes adjuntar im√°genes o archivos de hasta 8MB!</p>
                
                <form id="contact-form" class="contact-form" onsubmit="sendDiscordWebhook(event);">
                    <div class="form-group">
                        <label for="nombre">Tu Nombre:</label>
                        <input type="text" id="nombre" name="nombre" placeholder="Ej. Joel Layel" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Tu Email:</label>
                        <input type="text" id="email" name="email" placeholder="ejemplo@email.com" required>
                    </div>

                    <div class="form-group">
                        <label for="mensaje">Tu Mensaje:</label>
                        <textarea id="mensaje" name="mensaje" placeholder="Me encantar√≠a ver m√°s detalles sobre..." required></textarea>
                    </div>
                    
                    <div class="form-group file-upload-container">
                        <label for="archivo" class="file-label">Adjuntar Archivos (M√°x. 8MB en total)</label>
                        <input type="file" id="archivo" name="archivo" accept="image/*, .zip, .pdf, .txt" multiple>
                        <span id="file-name-display">Ning√∫n archivo seleccionado.</span>
                    </div>

                    <button type="submit" id="submit-button">Enviar Mensaje üöÄ</button>
                    <div id="form-status" class="status-message"></div>
                </form>
            </section>
        
        </main>
    </div>

    <div id="ai-chat-container">
        <button id="chat-toggle-button">
            ü§ñ GeoGuru
        </button>

        <div id="ai-chat-window" class="hidden">
            <div id="chat-header">
                GeoGuru ü§ñ
                <span id="chat-close-button">√ó</span>
            </div>
            <div id="chat-messages">
                <div class="message bot-message">¬°Hola! Soy GeoGuru, tu asistente de GeoGuessr. Preg√∫ntame sobre cualquier concepto de la gu√≠a (e.g., "Postes Eslovenia").</div>
            </div>
            <div id="chat-input-area">
                <input type="text" id="chat-input" placeholder="Escribe tu duda aqu√≠...">
                <button id="chat-send-button">Enviar</button>
            </div>
        </div>
    </div>

    <div id="lightbox" class="hidden">
        <img id="lightbox-img" src="" alt="Imagen ampliada">
        <span id="lightbox-close">‚úñ</span>
    </div>


    <script>
        // --- 1. Funcionalidad de Desplazamiento Suave (Smooth Scrolling) ---
        function scrollToElement(id) {
            const element = document.getElementById(id);
            if (element) {
                element.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start' 
                });
            }
        }

        // --- 2. Funcionalidad de B√∫squeda ---
        document.getElementById('search-button').addEventListener('click', function() {
            const query = document.getElementById('search-input').value.toLowerCase();
            const sections = document.querySelectorAll('section');
            let found = false;

            for (const section of sections) {
                const sectionText = section.textContent.toLowerCase();
                if (sectionText.includes(query)) {
                    scrollToElement(section.id);
                    found = true;
                    break;
                }
            }

            if (!found && query.length > 0) {
                alert('No se encontraron resultados para: "' + document.getElementById('search-input').value + '"');
            }
        });

        document.getElementById('search-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('search-button').click();
            }
        });

        // --- 3. Funcionalidad del Asistente IA (GeoGuru) y Webhook de Discord ---
        
        // --- CHAT IA (Simulaci√≥n) ---
        const chatWindow = document.getElementById('ai-chat-window');
        const chatToggle = document.getElementById('chat-toggle-button');
        const chatClose = document.getElementById('chat-close-button');
        const chatInput = document.getElementById('chat-input');
        const chatSend = document.getElementById('chat-send-button');
        const chatMessages = document.getElementById('chat-messages');

        // Alternar visibilidad de la ventana de chat
        chatToggle.addEventListener('click', () => {
            chatWindow.classList.toggle('hidden');
        });

        // Cerrar la ventana de chat
        chatClose.addEventListener('click', () => {
            chatWindow.classList.add('hidden');
        });

        // Funci√≥n simulada para generar respuesta de la IA
        function generateAIResponse(query) {
            query = query.toLowerCase().trim();
            let response = '';

            // L√≥gica simple de respuesta basada en palabras clave
            if (query.includes('sol') || query.includes('hemisferio')) {
                response = 'La direcci√≥n del Sol es clave: en el <b>Hemisferio Norte</b>, el sol est√° al sur y las sombras apuntan al norte. En el <b>Hemisferio Sur</b>, el sol est√° al norte y las sombras apuntan al sur.';
            } else if (query.includes('conduccion') || query.includes('volante')) {
                response = 'Si ves el volante a la <b>derecha (RHD)</b>, conduces por la izquierda (Reino Unido, Jap√≥n, Australia). Si lo ves a la <b>izquierda (LHD)</b>, conduces por la derecha (Am√©ricas, Europa Continental).';
            } else if (query.includes('coche') || query.includes('camara') || query.includes('japon') || query.includes('vehiculo')) {
                response = 'La geometr√≠a del coche y la c√°mara son pistas importantes. Por ejemplo, los coches de Google negros son t√≠picos de <b>Jap√≥n</b> y algunas c√°maras en Brasil tienen antenas largas. La imagen "Imgg2.jpg" te muestra ejemplos visuales de distintos coches de Street View.';
            } else if (query.includes('stop') || query.includes('se√±ales')) {
                response = 'Las se√±ales de STOP cambian: <b>STOP</b> (Europa/EE.UU.), <b>PARE</b> (Latinoam√©rica), y <b>ALTO</b> (M√©xico/Guatemala). Otras se√±ales distintivas son las de Grecia y Pa√≠ses Bajos.';
            } else if (query.includes('eslovenia') || query.includes('postes')) {
                response = 'Los postes kilom√©tricos de Eslovenia son muy distintivos: son blancos y tienen el <b>n√∫mero de la carretera dentro de un recuadro amarillo</b>.';
            } else if (query.includes('colombia')) {
                response = 'Colombia es conocida por el soporte trasero de sus se√±ales de tr√°fico, que a menudo forma una <b>peque√±a cruz met√°lica</b> (‚Ä†).';
            } else if (query.includes('azul') || query.includes('amarillo') || query.includes('numeracion')) {
                response = 'La numeraci√≥n azul es para autopistas o autov√≠as. La numeraci√≥n amarilla/negra es para carreteras federales o principales (com√∫n en Alemania/Austria).';
            } else if (query.includes('pistas') || query.includes('miscelaneas') || query.includes('placa')) {
                response = 'Las pistas miscel√°neas incluyen detalles de <b>placas de matr√≠cula</b>, el dise√±o de <b>vallas</b> y las <b>etiquetas</b> en los postes de electricidad. La secci√≥n de "Pistas Clave Miscel√°neas" tiene una imagen con varios ejemplos.';
            } else if (query.includes('idiomas') || query.includes('lenguas') || query.includes('caracteres')) {
                response = 'La identificaci√≥n de idiomas por caracteres especiales (cir√≠lico, tailand√©s, etc.) es esencial. Por ejemplo, el <b>cir√≠lico</b> te acota a Bulgaria/Rusia, y las di√©resis con puntitos o anillos (`√Ñ, √ñ, √Ö`) son comunes en el norte de Europa.';
            } else if (query.includes('recursos') || query.includes('enlaces')) {
                response = 'La secci√≥n de Recursos incluye enlaces √∫tiles como GeoHub para mapas de pr√°ctica espec√≠ficos y el sitio oficial de GeoGuessr.';
            } else {
                response = 'Hmm... No estoy seguro de ese concepto. ¬øPuedes intentar con palabras clave como "sol", "coche", "stop", "idiomas" o "numeraci√≥n"?';
            }
            return response;
        }

        // Funci√≥n para enviar mensaje del Chat IA
        function sendMessage() {
            const query = chatInput.value;
            if (query.trim() === "") return;

            // 1. Mostrar mensaje del usuario
            const userMsg = document.createElement('div');
            userMsg.className = 'message user-message';
            userMsg.textContent = query;
            chatMessages.appendChild(userMsg);

            // 2. Simular tiempo de espera y mostrar respuesta de la IA
            chatInput.value = '';
            chatInput.disabled = true;
            chatSend.disabled = true;
            
            setTimeout(() => {
                const aiResponseText = generateAIResponse(query);
                const botMsg = document.createElement('div');
                botMsg.className = 'message bot-message';
                botMsg.innerHTML = aiResponseText; 

                chatMessages.appendChild(botMsg);

                // Desplazar hacia abajo
                chatMessages.scrollTop = chatMessages.scrollHeight;

                chatInput.disabled = false;
                chatSend.disabled = false;
                chatInput.focus();

            }, 800); 

            // Desplazar hacia abajo inmediatamente
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        chatSend.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // --- WEBHOOK DE DISCORD ---
        const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1435603401638674754/phcKyil1RruyZmnoicXTMuQZz9MV5mzdu8r9YXMlr7dt3qUoUk4OsEN9-CwHZUXCnZtO';
        const MAX_FILE_SIZE_MB = 8;
        const MAX_FILE_SIZE_BYTES = MAX_FILE_SIZE_MB * 1024 * 1024;
        const formStatus = document.getElementById('form-status');
        const fileInput = document.getElementById('archivo');
        const fileNameDisplay = document.getElementById('file-name-display');
        const emailInput = document.getElementById('email');

        const centralStatus = document.getElementById('central-status-message');
        const centralStatusText = document.getElementById('central-status-text');


        // Actualiza el nombre(s) de los archivos seleccionados
        fileInput.addEventListener('change', () => {
            if (fileInput.files.length > 0) {
                const names = Array.from(fileInput.files).map(file => file.name);
                fileNameDisplay.textContent = names.join(', ');
            } else {
                fileNameDisplay.textContent = 'Ning√∫n archivo seleccionado.';
            }
        });

        // Muestra el estado del formulario (Versi√≥n antigua: dentro del formulario - usada para errores de validaci√≥n)
        function setFormStatus(message, isError) {
            formStatus.classList.remove('success', 'error');
            formStatus.textContent = message;
            formStatus.classList.add(isError ? 'error' : 'success');
            formStatus.style.opacity = 1;
            setTimeout(() => { formStatus.style.opacity = 0; }, 5000); 
        }

        // Muestra el estado del formulario (NUEVA Versi√≥n: centrado y flotante - usada para √©xito/error de env√≠o)
        function setStatus(message, isError) {
            centralStatus.classList.remove('success-central', 'error-central', 'hidden-status');
            centralStatusText.textContent = message;
            centralStatus.classList.add(isError ? 'error-central' : 'success-central');
            
            // Hace visible el mensaje
            centralStatus.style.opacity = 1;
            centralStatus.style.visibility = 'visible';

            // Lo oculta despu√©s de 3 segundos
            setTimeout(() => { 
                centralStatus.classList.add('hidden-status'); 
            }, 3000); 
        }
        
        // Funci√≥n de validaci√≥n de email (b√°sica)
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;
            return emailRegex.test(email);
        }


        // Funci√≥n principal para enviar el formulario a Discord
        async function sendDiscordWebhook(event) {
            event.preventDefault();

            const form = event.target;
            const submitButton = document.getElementById('submit-button');
            const files = fileInput.files;

            // --- 1. VALIDACI√ìN DEL EMAIL ---
            if (!isValidEmail(emailInput.value)) {
                setFormStatus('‚ùå Error: Por favor, introduce un formato de correo electr√≥nico v√°lido (ej. nombre@dominio.com).', true);
                return;
            }

            // Deshabilitar bot√≥n para evitar env√≠os dobles
            submitButton.disabled = true;
            submitButton.textContent = 'Enviando...';
            setFormStatus('', false); // Limpia el mensaje interno del formulario

            
            const nombre = document.getElementById('nombre').value;
            const email = emailInput.value;
            const mensaje = document.getElementById('mensaje').value;


            // --- 2. VALIDACI√ìN DEL TAMA√ëO TOTAL DE ARCHIVOS ---
            let totalSize = 0;
            if (files.length > 0) {
                for (const file of files) {
                    totalSize += file.size;
                }
            }
            if (totalSize > MAX_FILE_SIZE_BYTES) {
                setFormStatus(`Error: El tama√±o total de los archivos excede el l√≠mite de ${MAX_FILE_SIZE_MB}MB.`, true);
                submitButton.disabled = false;
                submitButton.textContent = 'Enviar Mensaje üöÄ';
                return;
            }
            

            // --- 3. PREPARAR DATOS DEL WEBHOOK ---
            const webhookData = new FormData();
            
            // Crear el objeto JSON de Discord Embed
            const embed = {
                title: "üìß Nuevo Mensaje de Gu√≠a GeoGuessr PRO",
                description: mensaje,
                color: 3498901, 
                fields: [
                    { name: "üë§ Nombre", value: nombre, inline: true },
                    { name: "üìß Email", value: email, inline: true },
                    { name: "üì¶ Archivos Adjuntos", value: files.length > 0 ? `${files.length} archivo(s)` : "Ninguno", inline: false }
                ],
                timestamp: new Date().toISOString(),
            };
            
            // Adjuntar el JSON del Embed
            webhookData.append('payload_json', JSON.stringify({ embeds: [embed] }));


            // --- 4. ADJUNTAR M√öLTIPLES ARCHIVOS (CORRECCI√ìN CLAVE) ---
            if (files.length > 0) {
                for (let i = 0; i < files.length && i < 10; i++) { 
                    // Adjuntar cada archivo con un nombre √∫nico: file0, file1, etc.
                    webhookData.append(`file${i}`, files[i], files[i].name);
                }
                if (files.length > 10) {
                     // Si hay m√°s de 10, ajustamos el mensaje para Discord
                     embed.description = `[AVISO: Solo se adjuntaron 10 archivos. Los archivos restantes fueron omitidos.]\n\n${mensaje}`;
                     webhookData.set('payload_json', JSON.stringify({ embeds: [embed] }));
                }
            }


            // --- 5. ENVIAR A DISCORD ---
            try {
                const response = await fetch(DISCORD_WEBHOOK_URL, {
                    method: 'POST',
                    body: webhookData,
                });

                if (response.ok) {
                    // Muestra el mensaje centrado de √©xito
                    setStatus("‚úÖ ¬°Mensaje enviado con √©xito!", false);
                    form.reset(); // Limpiar el formulario
                    fileNameDisplay.textContent = 'Ning√∫n archivo seleccionado.';
                } else {
                    // Muestra el mensaje centrado de error
                    setStatus(`‚ùå Error al enviar (Status: ${response.status}). Intenta de nuevo.`, true);
                }

            } catch (error) {
                setStatus("‚ùå Error de conexi√≥n. Verifica la URL del Webhook o tu red.", true);
            }

            // Volver a habilitar el bot√≥n y restablecer el texto
            submitButton.disabled = false;
            submitButton.textContent = 'Enviar Mensaje üöÄ';
        }

        document.getElementById('contact-form').onsubmit = sendDiscordWebhook;


        // --- FUNCIONALIDAD DE LIGHTBOX / ZOOM DE IM√ÅGENES ---
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        const lightboxClose = document.getElementById('lightbox-close');

        // Selecciona todas las im√°genes con la clase 'zoomable-image'
        document.querySelectorAll('.zoomable-image').forEach(image => {
            image.addEventListener('click', (e) => {
                e.preventDefault(); // Evita que el enlace haga la acci√≥n por defecto
                
                // Obtiene la URL de la imagen (del atributo href de su padre <a>)
                const imageUrl = image.parentElement.href;
                
                lightboxImg.src = imageUrl; // Establece la fuente de la imagen en el lightbox
                lightbox.classList.remove('hidden'); // Muestra el lightbox
                document.body.style.overflow = 'hidden'; // Evita el scroll del fondo
            });
        });

        // Cierra el lightbox al hacer clic en el bot√≥n de cierre
        lightboxClose.addEventListener('click', () => {
            lightbox.classList.add('hidden');
            document.body.style.overflow = 'auto'; // Restaura el scroll del fondo
        });

        // Cierra el lightbox al hacer clic fuera de la imagen (en el fondo oscuro)
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) { // Solo si el clic es directamente en el div del lightbox
                lightbox.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        });

    </script>

</body>
</html>
